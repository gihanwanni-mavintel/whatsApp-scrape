services:
  - type: web
    name: whatsapp-scraper
    runtime: node
    plan: starter
    env: node
    buildCommand: pnpm install
    startCommand: pnpm start
    healthCheckPath: /api/health
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 3000
      - key: DATABASE_URL
        sync: false
      - key: MONITORED_GROUPS
        sync: false
      - key: CRON_SCHEDULE
        value: "0 * * * *"  # Every hour
      - key: TIMEZONE
        value: Asia/Colombo
      - key: MESSAGE_LIMIT
        value: 500
      - key: SCRAPE_MEDIA
        value: false
      - key: RETENTION_DAYS
        value: 30
      - key: LOG_LEVEL
        value: info
    disk:
      name: whatsapp-session
      mountPath: /opt/render/project/src/.wwebjs_auth
      sizeGB: 1
